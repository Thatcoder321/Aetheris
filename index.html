<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aetheris</title>
    
    <link rel="stylesheet" href="/css/gridstack.min.css" />
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/widgets.css">
    <link rel="stylesheet" href="/css/phosphor-fill.css">
</head>
<body>

    <!-- ================================== -->
    <!-- === UI OVERLAYS (Outside 3D Space) === -->
    <!-- ================================== -->
    
    <!-- All Action Buttons are grouped here for positioning -->
    <div class="action-buttons-container">
        <div id="reorganize-btn" class="action-btn">
            <i class="ph-magic-wand-fill"></i>
        </div>
        <div id="settings-btn" class="action-btn">
            <i class="ph-gear-fill"></i>
        </div>
    </div>

    <!-- The Settings Panel -->
    <aside id="settings-panel">
        <div class="settings-header">
            <h2>Settings</h2>
            <button id="settings-close-btn">×</button>
        </div>
        <div class="settings-content">
            <!-- Content is drawn by JavaScript -->
        </div>
    </aside>

    <!-- The AI Reorganization Modal -->
    <div id="reorganize-modal-overlay" class="hidden">
        <div id="reorganize-modal">
            <h3>Describe your ideal layout</h3>
            <p>For example: "Minimalist and clean" or "Put my productivity tools on the right."</p>
            <form id="reorganize-form">
                <input type="text" id="reorganize-input" placeholder="Type here..." required>
                <button type="submit">Reorganize</button>
            </form>
            <button id="reorganize-cancel-btn">×</button>
        </div>
    </div>

    <!-- The Preset Buttons -->
    <div class="preset-buttons">
        <button onclick="applyPreset('default')">Default</button>
        <button onclick="applyPreset('sidebar-left')">Sidebar</button>
        <button onclick="applyPreset('focused-center')">Focused</button>
        <button id="reset-layout-btn">Reset Layout</button> 
    </div>


    <!-- ================================== -->
    <!-- === 3D STAGE (Inside Wrapper) === -->
    <!-- ================================== -->

    <div class="perspective-wrapper">
        <main id="stage" class="grid-stack"></main>
    </div>


    <!-- ================================== -->
    <!-- === SCRIPT TAGS (At the very end) === -->
    <!-- ================================== -->
    
    <!-- Libraries FIRST -->
    <script src="/js/gridstack-all.js" defer></script>
    
    <!-- World Setup -->
    <script src="/js/main.js" defer></script>
    
    <!-- Widget Blueprints -->
    <script src="/js/widgets-v2.js" defer></script>
    
    <!-- Environment Variables -->
    <script src="/js/env.js" defer></script>
    
    <!-- Main Application Logic (Runs Last) -->
    <script src="/js/app.js" defer></script>

</body>
</html>